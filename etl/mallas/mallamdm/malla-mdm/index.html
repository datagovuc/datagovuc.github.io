<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.81.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Malla MDM #  La Malla MDM se encarga de consolidar la información que se tiene sobre entidades relevantes, que actualmente se encuentra almacenada en diversos sistemas de la Universidad. Para esto se unifican los registros correspondientes y se almacena el registro consolidado (golden record), junto a las llaves necesarias para acceder a los registros originales, en el schema MDIUC.
El pipeline del proceso de la malla MDM se encuentra en la ruta Fase 1/NORMALIZADO/MCP_MDIUC de la rama feature_mcp_mdiuc."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="HOW-TO"><meta property="og:description" content="Malla MDM #  La Malla MDM se encarga de consolidar la información que se tiene sobre entidades relevantes, que actualmente se encuentra almacenada en diversos sistemas de la Universidad. Para esto se unifican los registros correspondientes y se almacena el registro consolidado (golden record), junto a las llaves necesarias para acceder a los registros originales, en el schema MDIUC.
El pipeline del proceso de la malla MDM se encuentra en la ruta Fase 1/NORMALIZADO/MCP_MDIUC de la rama feature_mcp_mdiuc."><meta property="og:type" content="article"><meta property="og:url" content="https://datagovuc.github.io/etl/mallas/mallamdm/malla-mdm/"><meta property="article:section" content="etl"><title>HOW-TO | [ GOB D+I ]</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.bb4068fae5d35122e7452ad3a9d825a65294895db70801a94f2b0764660295d8.css integrity="sha256-u0Bo+uXTUSLnRSrTqdglplKUiV23CAGpTysHZGYCldg="><script defer src=/en.search.min.3564487654c1c671d0ac4e2888d7e82d08b109371e22f165e2696d7602d2c4cc.js integrity="sha256-NWRIdlTBxnHQrE4oiNfoLQixCTceIvFl4mltdgLSxMw="></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>[ GOB D+I ]</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><input type=checkbox id=section-fa606e3efde5110d75d0a09b9ead6d39 class=toggle>
<label for=section-fa606e3efde5110d75d0a09b9ead6d39 class="flex justify-between"><a href=https://datagovuc.github.io/azure/>AZURE</a>
<span>▾</span></label><ul><li><a href=https://datagovuc.github.io/azure/give-access/>Accesos a BD</a></li><li><a href=https://datagovuc.github.io/azure/apisipa/>API SIPA</a></li><li><a href=https://datagovuc.github.io/azure/create-user/>Creación usuarios</a></li></ul></li><li><a href=https://datagovuc.github.io/catalogo-uc/>CATÁLOGO</a><ul></ul></li><li><input type=checkbox id=section-7b1706bfe2ac07274fedc0653c2e509d class=toggle checked>
<label for=section-7b1706bfe2ac07274fedc0653c2e509d class="flex justify-between"><a href=https://datagovuc.github.io/etl/>ETL</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-404d8c7ce0a7e7573898a51d2c23d0c4 class=toggle>
<label for=section-404d8c7ce0a7e7573898a51d2c23d0c4 class="flex justify-between"><a href=https://datagovuc.github.io/etl/monitoreo/>Monitoreo</a>
<span>▾</span></label><ul><li><a href=https://datagovuc.github.io/etl/monitoreo/links-pbi/>Reportes Power BI</a></li></ul></li><li><input type=checkbox id=section-1b1a9d67650fa4ce1ad470a45cb5fde4 class=toggle checked>
<label for=section-1b1a9d67650fa4ce1ad470a45cb5fde4 class="flex justify-between"><a>Mallas</a>
<span>▾</span></label><ul><li><a href=https://datagovuc.github.io/etl/mallas/malla-adl/>Malla ADL</a></li><li><a href=https://datagovuc.github.io/etl/mallas/malla-stg/>Malla STG</a></li><li><a href=https://datagovuc.github.io/etl/mallas/malla-sp/>Malla SP</a></li><li><a href=https://datagovuc.github.io/etl/mallas/malla-sbx/>Malla SBX</a></li><li><input type=checkbox id=section-8d37e56937bb4bfaff6d5ac1c1367c3a class=toggle checked>
<label for=section-8d37e56937bb4bfaff6d5ac1c1367c3a class="flex justify-between"><a>Malla MDM</a>
<span>▾</span></label><ul><li><a href=https://datagovuc.github.io/etl/mallas/mallamdm/malla-mdm/ class=active>HOW-TO</a></li><li><a href=https://datagovuc.github.io/etl/mallas/mallamdm/pruebamalla/>Prueba malla</a></li></ul></li></ul></li><li><input type=checkbox id=section-309e41bcdc02b787a4f745386f0456eb class=toggle>
<label for=section-309e41bcdc02b787a4f745386f0456eb class="flex justify-between"><a>Operación</a>
<span>▾</span></label><ul><li><a href=https://datagovuc.github.io/etl/operacion/cargatabla/>Carga de tablas</a></li></ul></li></ul></li><li><input type=checkbox id=section-304c3b3e57a37bcd413e2e617b29ad62 class=toggle>
<label for=section-304c3b3e57a37bcd413e2e617b29ad62 class="flex justify-between"><a>MDI</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-4aa88a8e1b63e5edba381aaeaa05784f class=toggle>
<label for=section-4aa88a8e1b63e5edba381aaeaa05784f class="flex justify-between"><a>Ficha Academica</a>
<span>▾</span></label><ul><li><a href=https://datagovuc.github.io/mdi/ficha-academica/docencia/>Docencia y formación de personas</a></li></ul></li></ul></li><li><input type=checkbox id=section-b8a0889e63e5f81c3d0bd54064ef668c class=toggle>
<label for=section-b8a0889e63e5f81c3d0bd54064ef668c class="flex justify-between"><a href=https://datagovuc.github.io/sistemas/>SISTEMAS</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-769ff70f4e3da7be6898e6554d20eefe class=toggle>
<label for=section-769ff70f4e3da7be6898e6554d20eefe class="flex justify-between"><a href=https://datagovuc.github.io/sistemas/admision/>Admision</a>
<span>▾</span></label><ul><li><a href=https://datagovuc.github.io/sistemas/admision/indicadores/>Indicadores</a></li></ul></li><li><input type=checkbox id=section-d761dfde139baece3bcf93a95d0ee141 class=toggle>
<label for=section-d761dfde139baece3bcf93a95d0ee141 class="flex justify-between"><a href=https://datagovuc.github.io/sistemas/banner/>Banner</a>
<span>▾</span></label><ul><li><a href=https://datagovuc.github.io/sistemas/banner/metadata/>Metadata</a></li></ul></li><li><input type=checkbox id=section-cdb1a0ce4b230c2a93578a1a6130dd2c class=toggle>
<label for=section-cdb1a0ce4b230c2a93578a1a6130dd2c class="flex justify-between"><a href=https://datagovuc.github.io/sistemas/peoplesoft/>Peoplesoft</a>
<span>▾</span></label><ul></ul></li></ul></li><li><input type=checkbox id=section-1b042e304be954211a030034ce85e02e class=toggle>
<label for=section-1b042e304be954211a030034ce85e02e class="flex justify-between"><a href=https://datagovuc.github.io/sql/>SQL</a>
<span>▾</span></label><ul><li><input type=checkbox id=section-b39dfc0a11a6fbd1c9f42f8f4c8f10c7 class=toggle>
<label for=section-b39dfc0a11a6fbd1c9f42f8f4c8f10c7 class="flex justify-between"><a href=https://datagovuc.github.io/sql/Modelo-DAC/>DAC</a>
<span>▾</span></label><ul><li><a href=https://datagovuc.github.io/sql/Modelo-DAC/Configuraci%C3%B3n-DAC/>Configuración DAC</a></li><li><a href=https://datagovuc.github.io/sql/Modelo-DAC/Script_Ejemplo_uso/>Script ejemplo de uso DAC</a></li></ul></li><li><input type=checkbox id=section-fac52381a93b67a47b491d0f59e7a9bf class=toggle>
<label for=section-fac52381a93b67a47b491d0f59e7a9bf class="flex justify-between"><a href=https://datagovuc.github.io/sql/procedures/>SP</a>
<span>▾</span></label><ul></ul></li><li><input type=checkbox id=section-198902c6a8dd459b295a033eaede726f class=toggle>
<label for=section-198902c6a8dd459b295a033eaede726f class="flex justify-between"><a href=https://datagovuc.github.io/sql/queries/>Queries</a>
<span>▾</span></label><ul></ul></li></ul></li><li><input type=checkbox id=section-0b278b34a37d6c2a1ea3108d465cb76a class=toggle>
<label for=section-0b278b34a37d6c2a1ea3108d465cb76a class="flex justify-between"><a>UTILS</a>
<span>▾</span></label><ul><li><a href=https://datagovuc.github.io/utils/columntypes/>Columns Types</a></li><li><a href=https://datagovuc.github.io/utils/mapeofk/>Mapeo de FK</a></li><li><a href=https://datagovuc.github.io/utils/resultjson/>Resultado de query en JSON</a></li><li><a href=https://datagovuc.github.io/utils/rowcount/>Row count</a></li><li><a href=https://datagovuc.github.io/utils/viewtableusage/>Tablas consumidas por una vista</a></li></ul></li></ul></nav><script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>HOW-TO</strong>
<label for=toc-control></label></div></header><article class=markdown><h1 id=malla-mdm><strong>Malla MDM</strong>
<a class=anchor href=#malla-mdm>#</a></h1><p>La Malla MDM se encarga de consolidar la información que se tiene sobre entidades relevantes, que actualmente se encuentra almacenada en diversos sistemas de la Universidad. Para esto se unifican los registros correspondientes y se almacena el registro consolidado (golden record), junto a las llaves necesarias para acceder a los registros originales, en el schema <code>MDIUC</code>.</p><p>El pipeline del proceso de la malla MDM se encuentra en la ruta <a href="https://adf.azure.com/en-us/authoring/pipeline/MCP_MDIUC?factory=%2Fsubscriptions%2F2e9b712f-7bd2-4ee5-9dba-8da83bc457fb%2FresourceGroups%2FETL%2Fproviders%2FMicrosoft.DataFactory%2Ffactories%2Fdatagov-df-devOps" target=_blank rel=noopener><code>Fase 1/NORMALIZADO/MCP_MDIUC</code></a> de la rama <code>feature_mcp_mdiuc</code>.</p><h1 id=pipelines-de-la-malla-mdm><strong>Pipelines de la malla MDM</strong>
<a class=anchor href=#pipelines-de-la-malla-mdm>#</a></h1><p>Los pipelines que utiliza la malla MDM se detallan a continuación.</p><h2 id=mcp_mdiuc><strong>MCP_MDIUC</strong>
<a class=anchor href=#mcp_mdiuc>#</a></h2><p>Este pipelines revisa cuáles son las entidades maestras a procesar, registradas en la tabla <code>dev_stage_datagov.MCP_MDIUC.ENTITY</code>, cada una de las cuales se procesa en el pipeline <a href="https://adf.azure.com/en-us/authoring/pipeline/PROCESS_ENTITY?factory=%2Fsubscriptions%2F2e9b712f-7bd2-4ee5-9dba-8da83bc457fb%2FresourceGroups%2FETL%2Fproviders%2FMicrosoft.DataFactory%2Ffactories%2Fdatagov-df-devOps" target=_blank rel=noopener><code>PROCESS_ENTITY</code></a></p><h2 id=process_entity><strong>PROCESS_ENTITY</strong>
<a class=anchor href=#process_entity>#</a></h2><p>Verifica si se trata de una entidad que tiene una fuente oficial de datos. Si la tiene, se ejecuta el pipeline <a href="https://adf.azure.com/en-us/authoring/pipeline/ENTITY%20WITH%20OFFICIAL%20SOURCE?factory=%2Fsubscriptions%2F2e9b712f-7bd2-4ee5-9dba-8da83bc457fb%2FresourceGroups%2FETL%2Fproviders%2FMicrosoft.DataFactory%2Ffactories%2Fdatagov-df-devOps" target=_blank rel=noopener><code>ENTITY_WITH_OFFICIAL_SOURCE</code></a></p><h2 id=entity_with_official_source><strong>ENTITY_WITH_OFFICIAL_SOURCE</strong>
<a class=anchor href=#entity_with_official_source>#</a></h2><p>Ejecuta el Databricks Notebook <a href="https://adb-203759025778857.17.azuredatabricks.net/?o=203759025778857#notebook/1505414730130282/command/4189266862738535" target=_blank rel=noopener><code>match_with_official_source</code></a>, que registra el mapeo de una entidad con el registro de la fuente oficial en la tabla <code>dev_stage_datagov.MDIUC.&lt;entityName>_TRANSLATION</code>. Si no existe un dato oficial que calce con un registro, este útlimo se ingresa en la tabla <code>dev_stage_datagov.MDIUC.UNMATCHED_&lt;entityName></code>.</p><p>Las reglas para encontrar pares entre los sistemas se encuentran en el Databricks Notebook.</p><h2 id=entity_without_official_source><strong>ENTITY_WITHOUT_OFFICIAL_SOURCE</strong>
<a class=anchor href=#entity_without_official_source>#</a></h2><ol><li><p>Este <a href="https://adf.azure.com/en-us/authoring/pipeline/ENTITY_WITHOUT_OFFICIAL_SOURCE?factory=%2Fsubscriptions%2F2e9b712f-7bd2-4ee5-9dba-8da83bc457fb%2FresourceGroups%2FETL%2Fproviders%2FMicrosoft.DataFactory%2Ffactories%2Fdatagov-df-devOps" target=_blank rel=noopener>pipeline</a> prepara las tablas auxiliares que se utilizarán en el proceso. Las tablas viven en la BD <code>dev_stage_datagov</code> y son las siguientes:</p><table><thead><tr><th style=text-align:left>Tabla</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>MCP_MDIUC.PROCESSING_&lt;entityName></code></td><td style=text-align:left>almacena los datos agrupados de distintos orígenes</td></tr><tr><td style=text-align:left><code>MCP_MDIUC.PROCESSED_&lt;entityName></code></td><td style=text-align:left>almacena los registros procesados que serán ingresados en el golden record</td></tr><tr><td style=text-align:left><code>MCP_MDIUC.INVALID_GROUP_&lt;entityName></code></td><td style=text-align:left>almacena los <code>id</code> de los grupos que no son válidos, es decir, no corresponden a la misma entidad</td></tr></tbody></table></li><li><p>Copia los datos de distintos orígenes a la tabla <code>MCP_MDIUC.PROCESSING_&lt;entityName></code>.</p></li><li><p>Asigna un <code>id</code> de grupo a los registros de <code>MCP_MDIUC.PROCESSING_&lt;entityName></code> utilizando los criterios en la tabla <code>MCP_MDIUC.GROUPING_RULE</code>.</p></li><li><p>Identifica si el grupo no necesita ser validado. Esto puede ocurrir porque el grupo o bien contiene un solo registro, o porque los registros dentro del grupo son totalmente iguales.</p></li><li><p>Mueve los registros que no necesitan ser validados a la tabla <code>MCP_MDIUC.PROCESSED_&lt;entityName></code>.</p></li><li><p>Procesa los grupos que necesitan ser validados en el Databricks Notebook <a href="https://adb-203759025778857.17.azuredatabricks.net/?o=203759025778857#notebook/1480857689989693/command/2362756711463722" target=_blank rel=noopener><code>Verify Groups</code></a>. Este Notebook se encarga de escribir en las tablas <code>MCP_MDIUC.PROCESSED_&lt;entityName></code> y <code>MCP_MDIUC.INVALID_GROUP_&lt;entityName></code> utilizando los criterios de la tabla <code>MCP_MDIUC.GROUPING_RULE</code>.</p></li><li><p>Actualiza los datos del golden record en el esquema <code>dev_stage_datagov.MDIUC</code> según los nuevos datos recién procesados en la tabla <code>MCP_MDIUC.PROCESSED_&lt;entityName></code>.</p></li></ol><h1 id=diagrama-de-los-procesos-de-la-malla-mdm><strong>Diagrama de los procesos de la malla MDM</strong>
<a class=anchor href=#diagrama-de-los-procesos-de-la-malla-mdm>#</a></h1><p>Los procesos asociados a la malla MDM se muestran en la siguiente imagen:</p><p><img src=/mdmpipeline.jpg alt></p><h1 id=tablas-utilizadas-en-el-proceso-de-la-malla-mdm><strong>Tablas utilizadas en el proceso de la malla MDM</strong>
<a class=anchor href=#tablas-utilizadas-en-el-proceso-de-la-malla-mdm>#</a></h1><p>A continuación, las tablas utilizadas en el proceso. Las tablas viven en el esquema <code>dev_stage_datagov.MCP_MDIUC</code>.</p><h2 id=entity><code>ENTITY</code>
<a class=anchor href=#entity>#</a></h2><p>Tabla con las entidades de registros maestros que se procesan en la malla MDM.</p><table><thead><tr><th style=text-align:left>Atributo</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>entity_id</code></td><td style=text-align:left>id único de una entidad</td></tr><tr><td style=text-align:left><code>name</code></td><td style=text-align:left>nombre de la entidad (igual al nombre de la tabla en el esquema <code>dev_stage_datagov.MDIUC</code>)</td></tr><tr><td style=text-align:left><code>is_valid</code></td><td style=text-align:left>indica si se debe procesar una entidad al ejecutar la malla</td></tr><tr><td style=text-align:left><code>has_oficcial_source</code></td><td style=text-align:left>indica si el procesamiento de una entidad requiere de datos externos (fuente oficial de datos)</td></tr></tbody></table><h2 id=entity_attribute><code>ENTITY_ATTRIBUTE</code>
<a class=anchor href=#entity_attribute>#</a></h2><p>Registra los atributos que se almacenan en el golden record de una entidad.</p><table><thead><tr><th style=text-align:left>Atributo</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>entity_attribute_id</code></td><td style=text-align:left>id único del registro</td></tr><tr><td style=text-align:left><code>entity_id</code></td><td style=text-align:left>id de la entidad de la tabla <code>MCP_MDIUC.ENTITY</code> a la que se hace referencia</td></tr><tr><td style=text-align:left><code>attribute_name</code></td><td style=text-align:left>nombre del atributo de la entidad en <code>MCP_MDIUC.ENTITY</code></td></tr><tr><td style=text-align:left><code>attribute_type</code></td><td style=text-align:left>tipo de dato del atributo; puede ser <code>int</code>, <code>nvarchar</code> o <code>datetime</code></td></tr><tr><td style=text-align:left><code>is_primary_key</code></td><td style=text-align:left>indica si el atributo es parte de la primary key de la entidad en su tabla en <code>dev_stage_datagov.MDIUC</code></td></tr></tbody></table><h2 id=entity_system_table><code>ENTITY_SYSTEM_TABLE</code>
<a class=anchor href=#entity_system_table>#</a></h2><p>Registra los atributos que se almacenan en el golden record de una entidad.</p><table><thead><tr><th style=text-align:left>Atributo</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>entity_system_table_id</code></td><td style=text-align:left>id único del registro</td></tr><tr><td style=text-align:left><code>entity_id</code></td><td style=text-align:left>id de la entidad de la tabla <code>MCP_MDIUC.ENTITY</code> a la que se hace referencia</td></tr><tr><td style=text-align:left><code>schema_name</code></td><td style=text-align:left>nombre del esquema en el que se encuentra la tabla</td></tr><tr><td style=text-align:left><code>table_name</code></td><td style=text-align:left>nombre de la tabla que almacena los registros de una entidad</td></tr><tr><td style=text-align:left><code>primary_key</code></td><td style=text-align:left>primary key de la tabla en <code>table_name</code>; se utiliza para hacer referencia entre el registro y el golden record</td></tr></tbody></table><h2 id=entity_attribute_system_mapping><code>ENTITY_ATTRIBUTE_SYSTEM_MAPPING</code>
<a class=anchor href=#entity_attribute_system_mapping>#</a></h2><p>Registra los atributos que se almacenan en el golden record de una entidad.</p><table><thead><tr><th style=text-align:left>Atributo</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>entity_attribute_system_mapping_id</code></td><td style=text-align:left>id único del registro</td></tr><tr><td style=text-align:left><code>entity_attribute_id</code></td><td style=text-align:left>id de un atributo del golden record que hace referencia a <code>MCP_MDIUC.ENTITY_ATTRIBUTE</code></td></tr><tr><td style=text-align:left><code>entity_system_table_id</code></td><td style=text-align:left>id de la tabla que contiene información sobre la entidad; hace referencia a <code>MCP_MDIUC.ENTITY_SYSTEM_TABLE</code></td></tr><tr><td style=text-align:left><code>column_name</code></td><td style=text-align:left>nombre de la columna del atributo deseado</td></tr><tr><td style=text-align:left><code>attribute_rank</code></td><td style=text-align:left>prioridad del origen del atributo al momento de armar el golden record</td></tr></tbody></table><h2 id=grouping_rule><code>GROUPING_RULE</code>
<a class=anchor href=#grouping_rule>#</a></h2><p>Describe los atributos que se utilizarán para agrupar posibles registros que corresponden a la misma entidad.</p><p>Si se ingresan los atributos A, B y C, los registros que tengan el mismo valor en el atributo A, el mismo valor en el atributo B y el mismo valor en el atributo C, se agruparán.</p><table><thead><tr><th style=text-align:left>Atributo</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>grouping_rule_id</code></td><td style=text-align:left>id único del registro</td></tr><tr><td style=text-align:left><code>entity_attribute_id</code></td><td style=text-align:left>id del atributo que se utiliza en la agrupación; hace referencia a <code>MCP_MDIUC.ENTITY_ATTRIBUTE</code></td></tr></tbody></table><h2 id=comparing_rule><code>COMPARING_RULE</code>
<a class=anchor href=#comparing_rule>#</a></h2><p>Describe las reglas que aplicarán durante la comparación de los registros de un mismo grupo para determinar si corresponden a la misma entidad.</p><table><thead><tr><th style=text-align:left>Atributo</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>comparing_id</code></td><td style=text-align:left>id único del registro</td></tr><tr><td style=text-align:left><code>entity_attribute_id</code></td><td style=text-align:left>id del atributo utilizado en la comparación; hace referencia a <code>MCP_MDIUC.ENTITY_ATTRIBUTE</code></td></tr><tr><td style=text-align:left><code>rule_type</code></td><td style=text-align:left>tipo de regla que se aplica sobre los valores durante la comparación</td></tr><tr><td style=text-align:left><code>parameter</code></td><td style=text-align:left>parámetros que puedan necesitar el tipo de comparación</td></tr><tr><td style=text-align:left><code>process</code></td><td style=text-align:left>procesamiento que necesiten los atributos a comparar</td></tr></tbody></table><p>Para el atributo <strong><code>rule_type</code></strong> existen tres rglas de comparación:</p><table><thead><tr><th style=text-align:left>Regla</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>exact</code></td><td style=text-align:left>ambos atributos deben ser exactamente iguales</td></tr><tr><td style=text-align:left><code>fuzzy</code></td><td style=text-align:left>compara atributos utilizando el algoritmo <a href="https://es.wikipedia.org/wiki/Distancia_de_Levenshtein#:~:text=La%20distancia%20de%20Levenshtein%2C%20distancia,y%20ciencias%20de%20la%20computaci%C3%B3n." target=_blank rel=noopener>distancia de edición</a>. En <code>parameter</code> se ingresa el porcentaje de diferencia mínimo necesario para el match</td></tr><tr><td style=text-align:left><code>fuzzy_allow_empty</code></td><td style=text-align:left>mismo comportamiento que <code>fuzzy</code>, pero, adicionalmente, considera una comparación positiva al comparar con un valor nulo</td></tr></tbody></table><p>Para el atributo <strong><code>process</code></strong> existe solo un valor posible:</p><table><thead><tr><th style=text-align:left>Regla</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>concat</code></td><td style=text-align:left>antes de realizar la comparación, concatena todos los valores que tengan el atributo <code>concat</code> en el campo <code>process</code>. Por ejemplo, si los atributos A, B, C tiene el valor <code>concat</code> en el campo <code>process</code>, al momento de comparar la comparación no se hará de manera individual; la comparación se realizará con el valor resultante de la concatenación de A, B y C. Los valores nulos se consideran strings vacíos</td></tr></tbody></table><h2 id=validation_type><code>VALIDATION_TYPE</code>
<a class=anchor href=#validation_type>#</a></h2><p>Describe los tipos de validación que se deben realizar a los grupos que podrían corresponder a la misma entidad.</p><table><thead><tr><th style=text-align:left>Atributo</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>validation_type_id</code></td><td style=text-align:left>id del registro</td></tr><tr><td style=text-align:left><code>name</code></td><td style=text-align:left>descripción del registro</td></tr></tbody></table><p>Actualmente se registran 3 tipos de validaciones (<code>id</code> = <code>validation_type_id</code>):</p><table><thead><tr><th style=text-align:left><code>id</code></th><th style=text-align:left>Nombre</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left>1</td><td style=text-align:left>Databricks notebook</td><td style=text-align:left>indica que el grupo debe ser revisado por el proceso de Databricks</td></tr><tr><td style=text-align:left>2</td><td style=text-align:left>Move directly. All rows same row</td><td style=text-align:left>indica que el grupo contiene exactamente los mismos atributos o si solo se compone de un registro, por lo que no son necesarias más validaciones. Se puede trasladar directamente</td></tr><tr><td style=text-align:left>3</td><td style=text-align:left>Resolved manually</td><td style=text-align:left>indica que el grupo coincide con un caso resuelto previamente de forma manual, por lo que no se deben realizar más validaciones y se debe trasladar el registro resuelto</td></tr></tbody></table><h1 id=tablas-utilizadas-por-entidad><strong>Tablas utilizadas por entidad</strong>
<a class=anchor href=#tablas-utilizadas-por-entidad>#</a></h1><h2 id=processing_entityname><code>PROCESSING_&lt;entityName></code>
<a class=anchor href=#processing_entityname>#</a></h2><p>Para entidades sin fuente oficial. En esta tabla se ingresan los datos de las distintas fuentes descritas en <code>MCP_MDIUC.ENTITY_SYSTEM_TABLE</code>.</p><table><thead><tr><th style=text-align:left>Atributo</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>group_id</code></td><td style=text-align:left>id utilizado para agrupar distintos registros que potencialmente corresponden a la misma entidad</td></tr><tr><td style=text-align:left><code>validation_type_id</code></td><td style=text-align:left>tipo de validación que se debe realizar. Referencia a <code>MCP_MDIUC.VALIDATION_TYPE</code></td></tr><tr><td style=text-align:left><code>entity_system_table_id</code></td><td style=text-align:left>id de la tabla fuente de la que se extrajo el registro</td></tr><tr><td style=text-align:left><code>primary_key</code></td><td style=text-align:left>llave primaria del registro en la fuente de origen</td></tr><tr><td style=text-align:left><code>&lt;atributo_entidad_i></code></td><td style=text-align:left>con i ∈ {1, &mldr; , n}. Corresponden a los atributos de la entidad en <code>MCP_MDIUC.ENTITY_ATTRIBUTE</code></td></tr></tbody></table><h2 id=processed_entityname><code>PROCESSED_&lt;entityName></code>
<a class=anchor href=#processed_entityname>#</a></h2><p>Para entidades sin fuente oficial. En esta tabla se guardan los registros que representan a cada grupo de <code>MCP_MDIUC.PROCESSING_&lt;entityName></code>.</p><table><thead><tr><th style=text-align:left>Atributo</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>group_id</code></td><td style=text-align:left>id del grupo. Utilizado para identificar a qué registros de `PROCESSING_ está representanto este registro</td></tr><tr><td style=text-align:left><code>&lt;atributo_entidad_i></code></td><td style=text-align:left>con i ∈ {1, &mldr; , n}. Corresponden a los atributos de la entidad en <code>MCP_MDIUC.ENTITY_ATTRIBUTE</code></td></tr></tbody></table><h2 id=unmatched_entityname><code>UNMATCHED_&lt;entityName></code>
<a class=anchor href=#unmatched_entityname>#</a></h2><p>En esta tabla se registran los IDs de los grupos que no cumplieron con las reglas de comparación descritas en <code>COMPARING_RULE</code> y que, por lo tanto, necesitan una revisión manual.</p><table><thead><tr><th style=text-align:left>Atributo</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>group_id</code></td><td style=text-align:left>id del grupo. Utilizado para identificar a qué registros de <code>PROCESSING_&lt;ENTITY></code>no cumplieron con las reglas de comparación</td></tr></tbody></table><h2 id=conflictive_entityname><code>CONFLICTIVE_&lt;entityName></code>
<a class=anchor href=#conflictive_entityname>#</a></h2><p>Para entidades sin fuente oficial .En esta tabla se almacenan los registros con los datos de la fuente oficial del grupo que fue resuelto manualmente.</p><table><thead><tr><th style=text-align:left>Atributo</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>conflicted_&lt;entityName>_id</code></td><td style=text-align:left>id del registro</td></tr><tr><td style=text-align:left><code>group_id</code></td><td style=text-align:left>id que agrupa los registros que corresponden a la misma entidad</td></tr><tr><td style=text-align:left><code>entity_system_table_id</code></td><td style=text-align:left>id de la tabla fuente de la que se extrajo el registro. Referencia a <code>MCP_MDIUC.ENTITY_SYSTEM_TABLE</code></td></tr><tr><td style=text-align:left><code>&lt;attributo_entitidad_1></code></td><td style=text-align:left>este atributo y los siguientes corresponden a los atributos de la entidad descritos en <code>ENTITY_ATTRIBUTE</code>.</td></tr></tbody></table><h2 id=resolution_entityname><code>RESOLUTION_&lt;entityName></code>
<a class=anchor href=#resolution_entityname>#</a></h2><p>En esta tabla se almacenan la información de resoluciones manuales de las entidades. Esta tabla puede tener dos estructuras:</p><h3 id=entidad-sin-fuente-oficial><strong>Entidad sin fuente oficial</strong>
<a class=anchor href=#entidad-sin-fuente-oficial>#</a></h3><p>En esta tabla se almacena el registro al cuál se resuelve desde el grupo almacenado en <code>CONFLICTIVE_&lt;entityName></code>.</p><table><thead><tr><th style=text-align:left>Atributo</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>conflicted_&lt;entityName>_id</code></td><td style=text-align:left>id del registro</td></tr><tr><td style=text-align:left><code>group_id</code></td><td style=text-align:left>id que agrupa los registros que corresponden a la misma entidad</td></tr><tr><td style=text-align:left><code>entity_system_table_id</code></td><td style=text-align:left>id de la tabla fuente de la que se extrajo el registro. Referencia a <code>MCP_MDIUC.ENTITY_SYSTEM_TABLE</code></td></tr><tr><td style=text-align:left><code>&lt;attributo_entitidad_1></code></td><td style=text-align:left>este atributo y los siguientes corresponden a los atributos de la entidad descritos en <code>ENTITY_ATTRIBUTE</code>.</td></tr></tbody></table><h3 id=entidad-con-fuente-oficial><strong>Entidad con fuente oficial</strong>
<a class=anchor href=#entidad-con-fuente-oficial>#</a></h3><p>En esta tabla se almacena la referencia a la tabla de origen del registro y a cuál corresponde en la tabla oficial.</p><table><thead><tr><th style=text-align:left>Atributo</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left><code>conflicted_&lt;entityName>_id</code></td><td style=text-align:left>id del registro</td></tr><tr><td style=text-align:left><code>entity_system_table_id</code></td><td style=text-align:left>id de la tabla fuente de la que se extrajo el registro. Referencia a <code>MCP_MDIUC.ENTITY_SYSTEM_TABLE</code></td></tr><tr><td style=text-align:left><code>pk_source</code></td><td style=text-align:left>valor de la llave primaria en la tabla de origen correspondiente a <code>entity_system_table_id</code></td></tr><tr><td style=text-align:left><code>pk_official_source</code></td><td style=text-align:left>valor de la llave primaria en la tabla maestra correspondiente a la entidad</td></tr></tbody></table><h1 id=pasos-para-ingresar-una-entidad-a-la-malla-mdm><strong>Pasos para ingresar una entidad a la malla MDM</strong>
<a class=anchor href=#pasos-para-ingresar-una-entidad-a-la-malla-mdm>#</a></h1><table><thead><tr><th style=text-align:left>Paso</th><th style=text-align:left>Descripción</th></tr></thead><tbody><tr><td style=text-align:left>0</td><td style=text-align:left>Paso previo a la malla. Se debe crear la tabla de la entidad en el esquema <code>dev_stage_datagov.MDIUC</code> que es donde se guardarán los datos al finalizar los procesos de la malla</td></tr><tr><td style=text-align:left>1</td><td style=text-align:left>Ingresar los datos de la entidad a <code>MCP_MDIUC.ENTITY</code></td></tr><tr><td style=text-align:left>2</td><td style=text-align:left>Ingresar datos de los atributos a <code>MCP_MDIUC.ENTITY_ATTRIBUTE</code></td></tr><tr><td style=text-align:left>3</td><td style=text-align:left>Ingresar datos de las tablas que se deben revisar a <code>MCP_MDIUC.ENTITY_SYSTEM_TABLE</code></td></tr><tr><td style=text-align:left>4</td><td style=text-align:left>ngresar equivalencia entre los atributos de las tablas y la entidad a <code>MCP_MDIUC.ENTITY_ATTRIBUTE_SYSTEM_MAPPING</code></td></tr><tr><td style=text-align:left>5</td><td style=text-align:left>Ingresar reglas de agrupación a <code>MCP_MDIUC.GROUPING_RULE</code></td></tr><tr><td style=text-align:left>6</td><td style=text-align:left>Ingresar reglas de comparación a <code>MCP_MDIUC.COMPARING_RULE</code></td></tr><tr><td style=text-align:left>7</td><td style=text-align:left>Ejecutar malla en Azure DataFactory <code>MCP_MDIUC</code></td></tr></tbody></table><p>Al ejecutar la malla se crearán las siguientes tablas si es que no existen previamente:</p><ul><li><code>MCP_MDIUC.PROCESSING_&lt;entityName></code></li><li><code>MCP_MDIUC.PROCESSED_&lt;entityName></code></li><li><code>MCP_MDIUC.UNMATCHED_&lt;entityName></code></li><li><code>MCP_MDIUC.CONFLICTIVE_&lt;entityName></code></li><li><code>MCP_MDIUC.RESOLUTION_&lt;entityName></code></li></ul><h2 id=resolución-manual-de-conflictos><strong>Resolución manual de conflictos</strong>
<a class=anchor href=#resoluci%c3%b3n-manual-de-conflictos>#</a></h2><p>Para ingresar los casos resueltos manualmente a la malla MDM se utilizan las tablas <code>MCP_MDIUC.CONFLICTIVE_&lt;entityName></code> (en casos de entidades sin fuente oficial) y <code>MCP_MDIUC.RESOLUTION_&lt;entityName></code>.</p><h3 id=para-entidades-sin-fuente-oficial><strong>Para entidades sin fuente oficial</strong>
<a class=anchor href=#para-entidades-sin-fuente-oficial>#</a></h3><ol><li><p>La malla revisa si alguno de los grupos en <code>PROCESSING_&lt;entityName></code> existe también en <code>CONFLICTIVE_&lt;entityName></code>.</p></li><li><p>Si un grupo existe, marca el grupo en <code>PROCESSING_&lt;entityName></code> con <code>validation_type_id = 3</code> para que no sea procesado por los siguientes pasos de la malla (SP o Databricks).</p></li><li><p>Copia el registro correspondiente al grupo desde <code>RESOLUTION_&lt;entityName></code>.</p></li></ol><h3 id=para-entidades-con-fuente-oficial><strong>Para entidades con fuente oficial</strong>
<a class=anchor href=#para-entidades-con-fuente-oficial>#</a></h3><ol><li><p>El script en Databricks revisa si el registro de la fuente oficial que está siendo procesado coincide con alguno en <code>RESOLUTION_&lt;entityName></code> utilizando el atributo <code>pk_source</code>.</p></li><li><p>Si el registro existe, simplemente se utiliza el registro oficial identificado con <code>pk_official_source</code> como la traducción desde la fuente de origen en la tabla maestra.</p></li></ol></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div></main></body></html>